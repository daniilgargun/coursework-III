# Руководство по установке

## Содержание
1. [Системные требования](#системные-требования)
2. [Установка .NET 8.0](#установка-net-80)
3. [Клонирование репозитория](#клонирование-репозитория)
4. [Установка зависимостей](#установка-зависимостей)
5. [Сборка проекта](#сборка-проекта)
6. [Первый запуск](#первый-запуск)
7. [Настройка](#настройка)
8. [Устранение неполадок](#устранение-неполадок)

## Системные требования

### Минимальные требования
- Windows 10 версии 1809 или выше
- 4 GB оперативной памяти
- 500 MB свободного места на диске
- Подключение к интернету (для загрузки данных)

### Рекомендуемые требования
- Windows 11
- 8 GB оперативной памяти
- 1 GB свободного места на диске
- Стабильное интернет-соединение

## Установка .NET 8.0

### Автоматическая установка
1. Перейдите на официальный сайт Microsoft: https://dotnet.microsoft.com/download/dotnet/8.0
2. Скачайте ".NET 8.0 Runtime" для Windows
3. Запустите установщик и следуйте инструкциям

### Проверка установки
Откройте командную строку и выполните:
```bash
dotnet --version
```
Должна отобразиться версия 8.0.x

### Установка через winget (Windows 11)
```bash
winget install Microsoft.DotNet.Runtime.8
```

## Клонирование репозитория

### Через Git
```bash
git clone https://github.com/daniilgargun/coursework-III.git
cd coursework-III
```

### Через GitHub Desktop
1. Откройте GitHub Desktop
2. Выберите "Clone a repository from the Internet"
3. Введите URL: `https://github.com/daniilgargun/coursework-III.git`
4. Выберите папку для клонирования
5. Нажмите "Clone"

### Скачивание ZIP-архива
1. Перейдите на страницу репозитория: https://github.com/daniilgargun/coursework-III
2. Нажмите зеленую кнопку "Code"
3. Выберите "Download ZIP"
4. Распакуйте архив в удобную папку

## Установка зависимостей

### Через командную строку
Откройте командную строку в папке проекта и выполните:
```bash
dotnet restore
```

### Через Visual Studio
1. Откройте файл `ScheduleViewer.sln` в Visual Studio
2. Щелкните правой кнопкой по решению в Solution Explorer
3. Выберите "Restore NuGet Packages"

### Ручная установка пакетов
Если автоматическое восстановление не работает:
```bash
dotnet add package Microsoft.EntityFrameworkCore --version 8.0.0
dotnet add package Microsoft.EntityFrameworkCore.Sqlite --version 8.0.0
dotnet add package Microsoft.EntityFrameworkCore.Tools --version 8.0.0
dotnet add package HtmlAgilityPack --version 1.11.54
```

## Сборка проекта

### Через командную строку
```bash
# Debug сборка
dotnet build

# Release сборка
dotnet build --configuration Release
```

### Через Visual Studio
1. Откройте проект в Visual Studio
2. Выберите конфигурацию (Debug/Release)
3. Нажмите Ctrl+Shift+B или выберите "Build" → "Build Solution"

### Проверка сборки
После успешной сборки в папке `bin/Debug/net8.0-windows/` или `bin/Release/net8.0-windows/` должен появиться файл `ScheduleViewer.exe`

## Первый запуск

### Через командную строку
```bash
dotnet run
```

### Через Visual Studio
1. Нажмите F5 или выберите "Debug" → "Start Debugging"
2. Или нажмите Ctrl+F5 для запуска без отладки

### Прямой запуск
Запустите файл `ScheduleViewer.exe` из папки `bin/Debug/net8.0-windows/`

### Что происходит при первом запуске
1. Создается база данных SQLite (`schedule.db`)
2. Выполняется попытка загрузки данных с сайта БТК
3. При неудаче загружаются тестовые данные
4. Открывается главное окно приложения

## Настройка

### Структура файлов
После первого запуска создаются следующие файлы и папки:
```
ScheduleViewer/
├── schedule.db          # База данных SQLite
├── log/                 # Папка с логами
│   └── app.log         # Файл логов
└── bin/                # Исполняемые файлы
```

### Настройка подключения к БД
База данных создается автоматически. Если нужно изменить расположение:
1. Откройте файл `Data/ScheduleDbContext.cs`
2. Измените строку подключения в методе `OnConfiguring`

### Настройка парсера
Для изменения источника данных:
1. Откройте файл `Services/ScheduleParser.cs`
2. Измените константу `BTK_URL`

### Настройка логирования
Логи сохраняются в папке `log/`. Для изменения уровня логирования отредактируйте соответствующие настройки в коде.

## Устранение неполадок

### Ошибка "Framework not found"
**Проблема**: Не установлен .NET 8.0
**Решение**: Установите .NET 8.0 Runtime с официального сайта Microsoft

### Ошибка "Could not load file or assembly"
**Проблема**: Не восстановлены NuGet пакеты
**Решение**: 
```bash
dotnet clean
dotnet restore
dotnet build
```

### Ошибка доступа к базе данных
**Проблема**: Нет прав на создание файлов в папке приложения
**Решение**: 
1. Запустите приложение от имени администратора
2. Или переместите проект в папку пользователя

### Ошибка загрузки данных с сайта
**Проблема**: Нет подключения к интернету или сайт недоступен
**Решение**: 
1. Проверьте подключение к интернету
2. Приложение автоматически загрузит тестовые данные
3. Попробуйте обновить данные позже через кнопку "Загрузить с сайта БТК"

### Приложение не запускается
**Проблема**: Различные причины
**Решение**:
1. Проверьте логи в папке `log/`
2. Убедитесь, что установлен .NET 8.0
3. Попробуйте пересобрать проект:
```bash
dotnet clean
dotnet restore
dotnet build
```

### Медленная работа приложения
**Проблема**: Недостаточно ресурсов системы
**Решение**:
1. Закройте другие приложения
2. Проверьте доступное место на диске
3. Перезапустите приложение

### Ошибки парсинга данных
**Проблема**: Изменилась структура сайта БТК
**Решение**:
1. Проверьте логи для получения подробной информации
2. Используйте тестовые данные до исправления парсера
3. Сообщите об ошибке разработчику

## Обновление приложения

### Обновление через Git
```bash
git pull origin main
dotnet restore
dotnet build
```

### Ручное обновление
1. Скачайте новую версию с GitHub
2. Скопируйте файл `schedule.db` из старой версии
3. Соберите и запустите новую версию

### Сохранение данных при обновлении
Важно сохранить файл `schedule.db` - он содержит все ваши данные.

## Создание ярлыка

### Для рабочего стола
1. Найдите файл `ScheduleViewer.exe` в папке `bin/Release/net8.0-windows/`
2. Щелкните правой кнопкой и выберите "Создать ярлык"
3. Переместите ярлык на рабочий стол

### Для меню "Пуск"
1. Скопируйте ярлык в папку:
   `%APPDATA%\Microsoft\Windows\Start Menu\Programs\`

## Удаление приложения

### Полное удаление
1. Удалите папку с проектом
2. Удалите ярлыки (если создавались)
3. Очистите временные файлы:
```bash
%TEMP%\ScheduleViewer*
```

### Сохранение данных
Если хотите сохранить данные, скопируйте файл `schedule.db` в безопасное место.

## Поддержка

Если у вас возникли проблемы:
1. Проверьте раздел "Устранение неполадок"
2. Посмотрите логи в папке `log/`
3. Создайте Issue на GitHub: https://github.com/daniilgargun/coursework-III/issues
4. Приложите к сообщению:
   - Описание проблемы
   - Версию Windows
   - Версию .NET
   - Содержимое файла логов 